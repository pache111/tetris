(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const a=document.querySelector("canvas"),c=a.getContext("2d"),p=20,d=14,L=30;let w=0;a.width=p*d;a.height=p*L;c.scale(p,p);const f=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,0,0,1,1]],e={position:{x:5,y:5},shape:[[1,1],[1,1]]},y=[[[1,1],[1,1]],[[1,1,1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[1,0],[1,0],[1,1]]];let h=0,m=0;function g(o=0){const t=o-m;m=o,h+=t,h>1e3&&(e.position.y++,h=0,l()&&(e.position.y--,E(),x())),O(),window.requestAnimationFrame(g)}function O(){c.fillStyle="#000",c.fillRect(0,0,a.width,a.height),f.forEach((o,t)=>{o.forEach((n,r)=>{n===1&&(c.fillStyle="yellow",c.fillRect(r,t,1,1))})}),e.shape.forEach((o,t)=>{o.forEach((n,r)=>{n&&(c.fillStyle="red",c.fillRect(r+e.position.x,t+e.position.y,1,1))})}),document.querySelector("span").innerText=w}document.addEventListener("keydown",o=>{if(o.key==="ArrowLeft"&&(e.position.x--,l()&&e.position.x++),o.key==="ArrowRight"&&(e.position.x++,l()&&e.position.x--),o.key==="ArrowDown"&&(e.position.y++,l()&&(e.position.y--,E(),x())),o.key==="ArrowUp"){const t=[];for(let r=0;r<e.shape[0].length;r++){const i=[];for(let s=e.shape.length-1;s>=0;s--)i.push(e.shape[s][r]);t.push(i)}const n=e.shape;e.shape=t,l()&&(e.shape=n)}});function l(){return e.shape.find((o,t)=>o.find((n,r)=>n!==0&&f[t+e.position.y]?.[r+e.position.x]!==0))}function E(){e.shape.forEach((o,t)=>{o.forEach((n,r)=>{n===1&&(f[t+e.position.y][r+e.position.x]=1)})}),e.position.x=Math.floor(d/2-2),e.position.y=0,e.shape=y[Math.floor(Math.random()*y.length)],l()&&(window.alert("game over !!!"),f.forEach(o=>o.fill(0)))}function x(){const o=[];f.forEach((t,n)=>{t.every(r=>r===1)&&o.push(n)}),o.forEach(t=>{f.splice(t,1);const n=Array(d).fill(0);f.unshift(n),w+=10})}g();
